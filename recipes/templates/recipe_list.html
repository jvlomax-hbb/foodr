<!DOCTYPE html>
<html>
    <head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">

</head>

    <body>
    <button class="js-modal-trigger" data-target="add-by-url-modal">Add recipe by url</button>
    <div class="container">
    {% for article in object_list %}
    <div class="block">
        <span class="title"> <a href="{% url 'recipe' pk=article.id %}">{{ article }}</a></span>
        <div class="columns">
            <div class="column is-two-thirds">
                <p class="subtitle">{{ article.description }}</p>
            </div>
            <div class="column is-one-third">
                {% if article.image %}
                    <figure class="image">
                        <img src="{{ article.image.url }}" style="width: 30%"/>
                    </figure>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
    </div>
    </body>
<div class="modal" id="add-by-url-modal">
    <div class="modal-background"></div>
    <div class="modal-content">
    <form action="/recipes/add-by-url/" method="POST">
        {% csrf_token %}
        <div class="field">
            <div class="control">
                <input name="url" id="url" class="input" type="text" />
            </div>
        </div>
        <div class="field">
            <div class="control">
                <input class="button" type="submit">Add</input>
            </div>
        </div>
    </form>
    </div>
    <button class="modal-close is-large" aria-label="close"></button>
</div>
<script>
   document.addEventListener('DOMContentLoaded', () => {
       // Functions to open and close a modal
       function openModal($el) {
           $el.classList.add('is-active');
       }

       function closeModal($el) {
           $el.classList.remove('is-active');
       }

       function closeAllModals() {
           (document.querySelectorAll('.modal') || []).forEach(($modal) => {
               closeModal($modal);
           });
       }

       // Add a click event on buttons to open a specific modal
       (document.querySelectorAll('.js-modal-trigger') || []).forEach(($trigger) => {
           const modal = $trigger.dataset.target;
           const $target = document.getElementById(modal);

           $trigger.addEventListener('click', () => {
               openModal($target);
           });
       });

       // Add a click event on various child elements to close the parent modal
       (document.querySelectorAll('.modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button') || []).forEach(($close) => {
           const $target = $close.closest('.modal');

           $close.addEventListener('click', () => {
               closeModal($target);
           });
       });

       // Add a keyboard event to close all modals
       document.addEventListener('keydown', (event) => {
           const e = event || window.event;

           if (e.keyCode === 27) { // Escape key
               closeAllModals();
           }
       });

   });
</script>
</html>
